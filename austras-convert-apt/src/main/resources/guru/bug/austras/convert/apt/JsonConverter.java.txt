package $PACKAGE_NAME$;

#IMPORTS#
guru.bug.austras.convert.converters.JsonConverter
guru.bug.austras.convert.json.reader.JsonValueReader
guru.bug.austras.convert.json.writer.JsonValueWriter
guru.bug.austras.core.Component
#END#

@Component
public class $SIMPLE_NAME$ implements JsonConverter<$TARGET$> {

    #PROPERTIES#
    private $CONVERTER_TYPE$ $CONVERTER_NAME$;
    #END#

    public FakeDtoToJsonConverter(#PROPERTIES PARAMS#$CONVERTER_TYPE$ $CONVERTER_NAME$#END#) {
        #PROPERTIES#
        this.$CONVERTER_NAME$ = $CONVERTER_NAME$;
        #END#
    }

    @Override
    public void toJson($TARGET$ value, JsonValueWriter writer) {
        writer.writeObject(value, (obj, out) -> {
            #PROPERTIES#
            out.writeValue("$PROPERTY_NAME$", obj.$PROPERTY_GETTER_NAME$(), $CONVERTER_NAME$);
            #END#
        });
    }

    @Override
    public $TARGET$ fromJson(JsonValueReader reader) {
        return reader.readNullableObject($TARGET$::new, (obj, key, in) -> {
            switch (key) {
                #PROPERTIES#
                case "$PROPERTY_NAME$":
                    obj.$PROPERTY_SETTER_NAME$(reader.read($CONVERTER_NAME$).orElse(null));
                    break;
                #END#
            }
        });
    }
}
