package $PACKAGE_NAME$;

#IMPORTS#
guru.bug.austras.core.Component
guru.bug.austras.core.Qualifier
java.util.Collection
guru.bug.austras.events.Dispatcher
org.slf4j.Logger
org.slf4j.LoggerFactory
#END#

@Component
$QUALIFIERS$
public class $SIMPLE_CLASS_NAME$ implements Dispatcher<$MESSAGE_TYPE$> {
    private static final Logger _log = LoggerFactory.getLogger($SIMPLE_CLASS_NAME$.class);
    #DEPENDENCIES#
    private final $DEPENDENCY_PROVIDER_CLASS$ $TARGET_PROVIDER_NAME$;
    #END#

    public $SIMPLE_CLASS_NAME$(
    #DEPENDENCIES#
        $DEPENDENCY_QUALIFIERS$ $DEPENDENCY_PROVIDER_CLASS$ $TARGET_PROVIDER_NAME$$,$
    #END#
    ) {
        #DEPENDENCIES#
        this.$TARGET_PROVIDER_NAME$ = $TARGET_PROVIDER_NAME$;
        #END#
    }

    @Override
    public void dispatch($MESSAGE_TYPE$ $MESSAGE_PARAM_NAME$) {
        for (var _receiverComponent : $RECEIVERS_DEPENDENCY_PROVIDER_NAME$.get()) {
            try {
                _receiverComponent.$RECEIVER_METHOD_NAME$($RECEIVER_METHOD_PARAMS$);
            } catch (Exception _ex) {
                _log.error("Exception while dispatching a message", _ex);
            }
        }
    }
}