package $PACKAGE_NAME$;

#IMPORTS#
guru.bug.austras.core.Component
guru.bug.austras.core.qualifiers.Qualifier
java.util.Collection
guru.bug.austras.events.Dispatcher
org.slf4j.Logger
org.slf4j.LoggerFactory
#END#

@Component
$QUALIFIERS$
public class $SIMPLE_CLASS_NAME$ implements Dispatcher<$MESSAGE_TYPE$> {
    private static final Logger _log = LoggerFactory.getLogger($SIMPLE_CLASS_NAME$.class);
    private final $RECEIVERS_SELECTOR_TYPE$ $RECEIVERS_SELECTOR_NAME$;

    public $SIMPLE_CLASS_NAME$($RECEIVERS_SELECTOR_QUALIFIERS$ $RECEIVERS_SELECTOR_TYPE$ $RECEIVERS_SELECTOR_NAME$) {
        this.$RECEIVERS_SELECTOR_NAME$ = $RECEIVERS_SELECTOR_NAME$;
    }

    @Override
    public void dispatch($MESSAGE_TYPE$ _message) {
        for (var _receiverComponent : $RECEIVERS_SELECTOR_NAME$.get()) {
            try {
                _receiverComponent.$RECEIVER_METHOD_NAME$(_message);
            } catch (Exception _ex) {
                _log.error("Exception while dispatching a message", _ex);
            }
        }
    }
}